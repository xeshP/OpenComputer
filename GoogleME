component = require("component")
gpu = component.gpu
local width, height = gpu.getResolution()
serial=require("serialization")


local file=io.open("logme","r")
local text=file:read("*all")
tablo = serial.unserialize(text)
tabler = file
file:close()



linenumber = 1
aligner = function(text)
    gpu.set(width / 2 - #text / 2, linenumber, text)
    linenumber = linenumber+1
end


stringtofloat = function(numstr)
    if #numstr <= 2 then
        numstr = tostring(numstr..".0")
    else
        punktcheck = string.sub(numstr, #numstr-1, #numstr-1)
        if punktcheck ~= "." then
            numstr = tostring(numstr..".0")
        end
    end
    return tonumber(numstr)
end



searchme = function(eingabe)
    returncounter = 0
    if string.find(eingabe, ":") then
        searchparam = "name"
    else if string.sub(eingabe, 1, 5) == "size=" then
        eingabe = stringtofloat(string.sub(eingabe, 6, #eingabe))
        searchparam = "size"
    else
        searchparam = "label"
        end
    end
    
        
    for anzahl,itemtab in pairs(tablo) do
        if anzahl ~= "n" then
            if itemtab[searchparam] == eingabe then
                print("["..(returncounter+1).."]")
                for info, infodetail in pairs(itemtab) do
                    print("  "..info.." : "..tostring(infodetail))
                end
                returncounter = returncounter+1
            end
            
        else
            return returncounter
        end
    end
end


term.setCursor(width/2-9, height/2)
term.write("GoogleME : ")
inputbar = io.read()
print(searchme(tostring(inputbar)))
term.write("                                                                ")
term.write("GoogleME : ")



